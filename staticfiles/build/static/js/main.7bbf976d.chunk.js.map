{"version":3,"sources":["api/axiosDefaults.js","utils/utils.js","contexts/CurrentUserContext.js","components/NavBar.js","hooks/useRedirect.js","pages/auth/Register.js","pages/auth/Login.js","App.js","reportWebVitals.js","index.js"],"names":["axios","defaults","headers","post","withCredentials","axiosReq","create","axiosRes","setTokenTimestamp","data","refreshTokenTimestamp","jwtDecode","refresh_token","exp","localStorage","setItem","removeTokenTimestamp","removeItem","CurrentUserContext","createContext","SetCurrentUserContext","useSetCurrentUser","useContext","CurrentUserProvider","_ref","children","_useState","useState","_useState2","_slicedToArray","currentUser","setCurrentUser","history","useHistory","handleMount","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axiosRes$get","wrap","_context","prev","next","get","sent","t0","console","log","stop","apply","arguments","useEffect","useMemo","interceptors","request","use","_ref3","_callee2","config","_context2","getItem","prevCurrentUser","push","abrupt","_x","err","Promise","reject","response","_ref4","_callee3","_err$response","_context3","status","_x2","_jsx","Provider","value","NavBar","handleLogout","Navbar","_jsxs","Container","NavLink","to","Brand","Toggle","Collapse","className","_Fragment","Text","username","onClick","useRedirect","userAuthStatus","RegisterForm","_errors$username","_errors$password","_errors$password2","_errors$non_field_err","password1","password2","registerData","setRegisterData","_useState3","_useState4","errors","setErrors","handleChange","event","_objectSpread","_defineProperty","target","name","handleSubmit","preventDefault","Row","Col","md","Form","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","map","message","idx","Alert","variant","Button","non_field_errors","Link","Image","src","LoginForm","password","loginData","setLoginData","_yield$axios$post","user","goBack","App","Switch","Route","exact","path","render","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.7bbf976d.chunk.js","sourcesContent":["import axios from \"axios\";\n\naxios.defaults.headers.post[\"Content-Type\"] = \"multipart/form-data\";\naxios.defaults.withCredentials = true;\n\nexport const axiosReq = axios.create();\nexport const axiosRes = axios.create();","import jwtDecode from \"jwt-decode\";\n\nexport const setTokenTimestamp = (data) => {\n  const refreshTokenTimestamp = jwtDecode(data?.refresh_token).exp;\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\n};\n\nexport const shouldRefreshToken = () => {\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\n};\n\nexport const removeTokenTimestamp = () => {\n  localStorage.removeItem(\"refreshTokenTimestamp\");\n};\n","import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useHistory } from \"react-router-dom\";\nimport { removeTokenTimestamp, shouldRefreshToken } from \"../utils/utils\";\n\nexport const CurrentUserContext = createContext();\nexport const SetCurrentUserContext = createContext();\n\nexport const useCurrentUser = () => useContext(CurrentUserContext);\nexport const useSetCurrentUser = () => useContext(SetCurrentUserContext);\n\nexport const CurrentUserProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const history = useHistory();\n\n  const handleMount = async () => {\n    try {\n      const { data } = await axiosRes.get(\"auth/user/\");\n      setCurrentUser(data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    handleMount();\n  }, []);\n\n  useMemo(() => {\n    axiosReq.interceptors.request.use(\n      async (config) => {\n        if (shouldRefreshToken()) {\n          try {\n            await axios.post(\"auth/token/refresh/\");\n          } catch (err) {\n            setCurrentUser((prevCurrentUser) => {\n              if (prevCurrentUser) {\n                history.push(\"/login\");\n              }\n              return null;\n            });\n            removeTokenTimestamp();\n            return config;\n          }\n        }\n        return config;\n      },\n      (err) => {\n        return Promise.reject(err);\n      }\n    );\n\n    axiosRes.interceptors.response.use(\n      (response) => response,\n      async (err) => {\n        if (err.response?.status === 401) {\n          try {\n            await axios.post(\"auth/token/refresh/\");\n          } catch (err) {\n            setCurrentUser((prevCurrentUser) => {\n              if (prevCurrentUser) {\n                history.push(\"/login\");\n              }\n              return null;\n            });\n            removeTokenTimestamp();\n          }\n          return axios(err.config);\n        }\n        return Promise.reject(err);\n      }\n    );\n  }, [history]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <SetCurrentUserContext.Provider value={setCurrentUser}>\n        {children}\n      </SetCurrentUserContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n};","import Container from \"react-bootstrap/Container\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\nimport { NavLink } from \"react-router-dom\";\nimport {\n  useCurrentUser,\n  useSetCurrentUser,\n} from \"../contexts/CurrentUserContext\";\nimport { axiosReq } from \"../api/axiosDefaults\";\nimport NavbarBrand from \"react-bootstrap/esm/NavbarBrand\";\n\nfunction NavBar() {\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useSetCurrentUser();\n\n  const handleLogout = async () => {\n    try {\n      await axiosReq.post(\"auth/logout/\");\n      setCurrentUser(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return (\n    <Navbar>\n      <Container>\n        <NavLink to=\"/\">\n          <Navbar.Brand>Eventually</Navbar.Brand>\n        </NavLink>\n        <Navbar.Toggle />\n        <Navbar.Collapse className=\"justify-content-end\">\n          {currentUser ? (\n            <>\n              <Navbar.Text>Welcome, {currentUser.username}</Navbar.Text>\n              <NavLink to=\"/\" onClick={handleLogout} className=\"mx-2\">\n                Logout\n              </NavLink>\n            </>\n          ) : (\n            <>\n              <NavLink to=\"/login\" className=\"mx-2\">\n                Login\n              </NavLink>\n              <NavLink to=\"/register\" className=\"mx-2\">\n                Register\n              </NavLink>\n            </>\n          )}\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n\nexport default NavBar;\n","import axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const useRedirect = (userAuthStatus) => {\n  const history = useHistory();\n\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        await axios.post(\"auth/token/refresh/\");\n        // if user is logged in, the code below will run\n        if (userAuthStatus === \"loggedIn\") {\n          history.push(\"/\");\n        }\n      } catch (err) {\n        // if user is not logged in, the code below will run\n        if (userAuthStatus === \"loggedOut\") {\n          history.push(\"/\");\n        }\n      }\n    };\n\n    handleMount();\n  }, [history, userAuthStatus]);\n};","import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Image from \"react-bootstrap/Image\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\n\nimport axios from \"axios\";\n\nconst RegisterForm = () => {\n  useRedirect(\"loggedIn\");\n  const [registerData, setRegisterData] = useState({\n    username: \"\",\n    password1: \"\",\n    password2: \"\",\n  });\n  const { username, password1, password2 } = registerData;\n\n  const [errors, setErrors] = useState({});\n\n  const history = useHistory();\n\n  const handleChange = (event) => {\n    setRegisterData({\n      ...registerData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axios.post(\"auth/registration/\", registerData);\n      history.push(\"/signin\");\n    } catch (err) {\n      setErrors(err.response?.data);\n    }\n  };\n\n  return (\n    <Row>\n      <Col className=\"my-auto py-2 p-md-2\" md={6}>\n        <Container className=\"p-4\">\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n              <Form.Label className=\"d-none\">username</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                value={username}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.username?.map((message, idx) => (\n              <Alert variant=\"warning\" key={idx}>\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password1\">\n              <Form.Label className=\"d-none\">Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password1\"\n                value={password1}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password1?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password2\">\n              <Form.Label className=\"d-none\">Confirm password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Confirm password\"\n                name=\"password2\"\n                value={password2}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password2?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Button type=\"submit\">Sign up</Button>\n            {errors.non_field_errors?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\n                {message}\n              </Alert>\n            ))}\n          </Form>\n        </Container>\n\n        <Container className=\"mt-3\">\n          <Link to=\"/signin\">\n            Already have an account? <span>Sign in</span>\n          </Link>\n        </Container>\n      </Col>\n      <Col md={6} className=\"my-auto d-none d-md-block p-2\">\n        <Image\n          src={\"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero2.jpg\"}\n        />\n      </Col>\n    </Row>\n  );\n};\n\nexport default RegisterForm;\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\n\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport { useSetCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { setTokenTimestamp } from \"../../utils/utils\";\n\nfunction LoginForm() {\n  useRedirect(\"loggedIn\");\n  const setCurrentUser = useSetCurrentUser();\n\n  const [loginData, setLoginData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const { username, password } = loginData;\n\n  const [errors, setErrors] = useState({});\n\n  const history = useHistory();\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const { data } = await axios.post(\"auth/login/\", loginData);\n      setCurrentUser(data.user);\n      setTokenTimestamp(data);\n      history.goBack();\n    } catch (err) {\n      setErrors(err.response?.data);\n    }\n  };\n\n  const handleChange = (event) => {\n    setLoginData({\n      ...loginData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  return (\n    <Row>\n      <Col className=\"my-auto p-0 p-md-2\" md={6}>\n        <Container>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n              <Form.Label className=\"d-none\">Username</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                value={username}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.username?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password\">\n              <Form.Label className=\"d-none\">Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                value={password}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Button type=\"submit\">Sign in</Button>\n            {errors.non_field_errors?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\n                {message}\n              </Alert>\n            ))}\n          </Form>\n        </Container>\n        <Container>\n          <Link to=\"/register\">\n            Don't have an account? <span>Sign up now!</span>\n          </Link>\n        </Container>\n      </Col>\n    </Row>\n  );\n}\n\nexport default LoginForm;\n","import NavBar from \"./components/NavBar\";\nimport { Route, Switch } from \"react-router-dom\";\nimport RegisterForm from \"./pages/auth/Register\";\nimport LoginForm from \"./pages/auth/Login\";\n\nfunction App() {\n  return (\n    <div>\n      <NavBar />\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <>\n              <h1>home</h1>\n            </>\n          )}\n        />\n        <Route exact path=\"/login\" render={() => <LoginForm />} />\n        <Route exact path=\"/register\" render={() => <RegisterForm />} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from \"react-router-dom\";\nimport { CurrentUserProvider } from \"./contexts/CurrentUserContext\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <CurrentUserProvider>\n        <App />\n    </CurrentUserProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}